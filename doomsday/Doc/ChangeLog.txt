
                        Doomsday Engine Change Log
                        ==========================
               Legend: + added, - fixed, * improved/changed


Version 1.7.11 (work in progress)
--------------
! Bugfixes Only
* revised server delta generation: fixed-size frames, prioritized 
  contents, sounds are stored inside frames (not separate packets)
* revised clientside handling of frames: collision detection for 
  movement prediction, missiles hidden on impact
* revised low-level networking: implement confirmed/ordered packets 
  manually, detect duplicates
* mobj translucency 0-255 (selector still overrides)
- external music was not loaded correctly from virtual files
- fixed: external sound resources reloaded every time the sound starts
- fixed: tracking of currently playing sounds
- fixed: floorclip values were restricted to 64 in mobj deltas
- fixed: client stepup limit is now exactly 24 units
- fixed: coord/offset problems if same sprite used in game and HUD
- missing upper texture in a skyceiling sector replaced with the 
  backsector's ceiling (was just blank white)
- fixed: base path validation (could be missing a slash)
- fixed: path of CPHelp.txt was sometimes not translated
- fixed: mobj translucency didn't affect the shadow
- music is not restarted if it's already playing
  
jDoom:
* game-corpse-time: corpses fade smoothly 

jHeretic:
* game-corpse-time: corpses fade smoothly 
  
jHexen:
- fixed: problem with excessive sound sequence repeat (e.g. map12)
- fixed: torch light for remote players
- fixed: no mobjs spawned when dedicated server starts
- clientside powers were not correctly set to zero at death, map change
- clientside Wings of Wrath icon didn't rotate when flying
- fixed: dedicated server deadlock when monsters don't find any players
- fixed: crash when minotaur vanishes and master is dead
- fixed: 'use artifact' sounds not audible on clientside

XG:
- when loading a savegame, line activators were not correctly restored

drD3D:
- fixed a problem with mode selection (refresh rates)

Installer:
- fixed: pressing Enter after typing a path closed the installer dialog


Version 1.7.10
--------------
+ support for ZIP/PK3 files (no compression!), can be loaded like WAD 
  files (-file, load; no unload, though), contents added to the virtual
  file hierarchy (package root dir => Doomsday base dir)
+ after runtime directory has been searched, data files are also 
  searched from the default data directory (e.g. Data\jDoom\):
  "-file Test.wad" will load Data\jDoom\Test.wad
+ WAD, LMP, PK3 and ZIP files from the Data\Game\Auto directory are 
  always loaded automatically
+ WAD/PK3 files can be loaded from virtual files (inside PK3s)
+ IncludeIf and SkipIf directives can also test for game modes, e.g.
  "SkipIf Not doom1-ultimate"
+ light decorations (dynlights on textures/flats), "Decoration" defs
+ cvar group 'rend-light-decor'
+ sprite frames can be replaced with external resources (Patches)
+ raw screens can be replaced with external resources (Patches)
+ -maxtex option: set maximum texture size ("-maxtex 128")
+ sound flag 'sf_dontstop' (0x20): sound does not stop even if emitter 
  is destroyed (sound cannot be stopped until it finishes normally)
* faster 3D model loading during startup
* rend-camera-smooth: Z-movement of planes is also smoothed
* default dynlight brightness increased to 0.75 (rend-light-bright)
* default halo brightness decreased to 35 (rend-halo-bright)
- halo distance measured in 3D: no excess brightness when viewed from 
  above/below
- fixed: sprites were sometimes clipped by a sky ceiling
- fixed: problems with rend-light-num 

jDoom:
+ light decorations for all switches, many textures and some flats of 
  Doom 1
* barrel/rocket explosions continue even after barrel/rocket is gone 
  (barexp uses sf_dontstop)
* Pause key is now the default binding for pause (was P)

jHeretic:
- fixed: interlude screen wouldn't show seconds if they're zero

jHexen:
* Pause key is now the default binding for pause (was P)
- fixed: weapon pieces bob only partially
- fixed: screen border flicker in fullscreen mode


Version 1.7.9
-------------
+ external resource locator (in Data\Game\: Textures\, Patches\, Music\
  and Sfx\) with game mode subdirs (see readme)
+ high-resolution patches (e.g. menu graphics, game fonts, background 
  pictures)
+ netgame server info includes: game mode (e.g. doom1-ultimate, 
  doom2-plut, hexen), game config, IWAD, PWADs, player names
+ info about network setup added to cphelp.txt, shows up during setup
+ cvar 'server-player-limit': maximum number of clients
+ cvar 'rend-light-wall-angle': intensity of angle-based wall lighting
+ cvar 'input-mouse-filter': average mouse X/Y axis values
+ model flag 'df_dim' (0x1000000): model is never rendered fullbright
+ cmds 'movefloor', 'moveceil', 'movesec': move a sector's plane(s)
* low-level networking updated to DirectX 8
* improved network setup GUI
* client can only connect to servers in the same game mode
* cmd 'net' prints usage info
* cvar 'net-ip-port' is the local TCP/IP port
* "Filter mouse movement" added to Control Panel's Input page
* -nohightex now only affects wall textures and flats
* crosshair color alpha (cmd "crosshair color", var "view-cross-a")
- fixed: client was able to connect to a server running a different game
- fixed: aborted client connection crashed the server
- potential problem handling client connections fixed
- fixed: fullbrightness didn't affect particles
- DirectSound 8: fixed a problem with buffer loading; using -csd should 
  no longer be necessary
- Sound definition patching fixed (Ext/Group keys were ignored)
- fixed bug 712332: when server pauses a netgame, all clients will pause

KickStart:
* Cheb's KickStart v2.09 replaces the ancient v1.6

jDoom:
+ game modes: doom1-share, doom1, doom1-ultimate, doom2, doom2-plut, 
  doom2-tnt
+ automap added to Options -> Controls (under Misc.)
+ cvar game-corpse-sliding: corpses slide down stairs and ledges 
  (defaults to zero due to some bad behaviour; e.g. exit room of D2/22)
* cvar game-corpsetime renamed to game-corpse-time
- fixed bug 734892: sides with bogus sectors
- A_Tracer() used to spawn puffs that were identical to bullet puffs, 
  this caused complications with particle generators

jHeretic:
+ game modes: heretic-share, heretic (normal registered), heretic-ext 
  (has episodes 4, 5)

jHexen:
+ game modes: hexen, hexen-dk (Death Kings of Dark Citadel)
- fixed: sound sequence delays with repeating sounds (sequence updater
  didn't get correct information about currently playing sound effects)
  
drOpenGL/drD3D:
+ -refresh option
* closest available refresh rate selected


Version 1.7.8
-------------
+ new master server mechanism (uses HTTP)
+ cvar net-master-path (default: "/master.php"): location of the master
  server at 'net-master-address' (default: "www.doomsdayhq.com")
+ cmd "net announce": send a server announcement to the master (if 
  server-public is nonzero, announcements are made automatically at two
  minute intervals)
* cvar net-master-port (default: 0): usually zero or 80
* clientside player coords override serverside coords under normal
  circumstances (maxdif checks removed)
* if one part of a psprite is fullbright, the whole psprite will be
- fixed: psprites were rendered with depth testing enabled; Doom plasma 
  rifle fire anim was broken
- fixed: clientside player animation didn't finish anim sequence
- fixed: line flags weren't updated on clientside (e.g. in Hexen map13)
- fixed: minor edge artifact with multipart psprites (e.g. in jDoom)

jDoom:
* lineattack weapons hit planes (pistol, shotguns, chaingun) 
- fixed: lineattack check for hitting sky planes, skyhack walls
- map31 and map32 no longer assumed to exist: Doom2.wad "00f6d407" 
  should work 
- weapon psprite timings (in Objects.ded) adjusted for super shotgun,
  rocket launcher: muzzle flash was out-of-sync by 1-2 tics

jHexen:
- fixed: dedicated server tried to draw teleport gfx and crashed
- fixed: scripted + yellow messages not shown on clientside
- fixed: client crashes when changing level
- fixed: status bar flicker

jtNet2:
- old master server stuff removed


Version 1.7.7
-------------
+ switch texture pairs (SW1/SW2) are precached at the same time
+ "Generator:Stage:Radius rnd": Randomness of particle radius
+ sound-info shows sound names as well as ID numbers
+ support for textured particles
* flat particles stick to planes
- high-resolution flats with 4 channels (alpha) were loaded incorrectly
- sector lightlevel overflow in sectordelta (e.g. on jHexen map 26)
- alternative texture path must be tried first when loading hires images
  (-texdir2)

jDoom:
* cvar player-air-movement: player movement speed while airborne 
  (0-32); use only small values in netgames
  
jHeretic:
- blinking statbar borders fixed

